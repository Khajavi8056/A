# 🧭 کتابخانه تحلیل دینامیک فیبوناچی (HipoFibonacci)

یک کتابخانه پیشرفته برای پلتفرم متاتریدر ۵ که برای تحلیل ساختار بازار و شناسایی نواحی ورود با احتمال بالا (High-Probability) بر اساس اصول فیبوناچی دینامیک و پرایس اکشن طراحی شده است.

## 📝 دیدگاه کلی

این کتابخانه فرآیند پیچیده و بصری تحلیل حرکات قیمت را به یک سیستم الگوریتمی مدون تبدیل می‌کند. هدف اصلی، شناسایی نقاط بازگشتی یا ادامه‌دهنده روند از طریق تحلیل دقیق آخرین لگ حرکتی بازار و واکنش قیمت به سطوح کلیدی آن است. منطق سیستم بر پایه دو سناریوی اصلی استوار است که بر اساس قدرت یا ضعف فاز اصلاحی قیمت، مدل ورود متفاوتی را ارائه می‌دهد.

---

## 🔬 منطق و متدولوژی اصلی

فرآیند تحلیل در این کتابخانه به چند فاز مجزا تقسیم می‌شود:

### فاز ۱: شناسایی لگ ساختاری (Structural Leg)

در قدم اول، کتابخانه به صورت خودکار آخرین لگ حرکتی معنادار بازار را شناسایی می‌کند.
* در یک روند صعودی، آخرین فاز اصلاحی نزولی به عنوان لگ اصلی در نظر گرفته می‌شود.
* در یک روند نزولی، آخرین فاز اصلاحی صعودی به عنوان لگ اصلی در نظر گرفته می‌شود.

یک ابزار فیبوناچی بر روی این لگ ساختاری رسم می‌شود تا سطوح اصلاحی و انبساطی آن مشخص گردد.

### فاز ۲: تایید فاز اصلاحی (Retracement Confirmation)

یک حرکت، زمانی که حداقلِ شرایط یک اصلاح سالم را داشته باشد، معنادار تلقی می‌شود. در این سیستم، عبور قیمت از **سطح ۵۰٪ فیبوناچی لگ اصلی**، به منزله تاییدی بر شروع یک فاز اصلاحی جدی است. این نقطه، یک فیلتر کلیدی برای جدا کردن نوسانات ضعیف از پولبک‌های واقعی است.

### فاز ۳: تحلیل ساختار پولبک و مدل‌های ورود

پس از تایید فاز اصلاحی، کتابخانه رفتار قیمت را برای انتخاب یکی از دو سناریوی زیر تحلیل می‌کند:

#### سناریوی A: ورود از طریق شکست ساختار (Break of Structure - BOS)

این سناریو برای یک **اصلاح سالم و استاندارد** طراحی شده است.

1.  **تشکیل ساختار مینور:** سیستم، لگ اصلاحی (پولبک) را به عنوان یک ساختار مینور مجزا تحلیل می‌کند.
2.  **وقوع شکست ساختار (BOS):** پس از تشکیل ساختار مینورِ پولبک، سیستم منتظر یک **شکست ساختار (BOS)** در جهت روند اصلی می‌ماند.
3.  **شناسایی ناحیه ورود (Point of Interest - POI):** پس از وقوع BOS، یک فیبوناچی نهایی و جدید رسم می‌شود. سیستم منتظر بازگشت قیمت به **ناحیه بهینه ۵۰٪ تا ۶۸٪** این فیبوناچی نهایی (ناحیه طلایی) می‌ماند. این ناحیه معمولاً با نواحی مهم پرایس اکشن مانند **اردربلاک (Order Block)** همپوشانی دارد. با رسیدن قیمت به این ناحیه، سیگنال ورود صادر می‌شود.

#### سناریوی B: ورود از طریق سطوح انبساطی (Extension Levels)

این سناریو زمانی فعال می‌شود که قیمت پس از یک اصلاح اولیه، **قدرت بالایی** از خود نشان داده و مستقیماً لگ اصلی را می‌شکند.

1.  **شکست مستقیم لگ اصلی:** قیمت با مومنتوم بالا حرکت کرده و از سقف/کف لگ ساختاری اولیه عبور می‌کند.
2.  **نظارت بر سطوح انبساطی:** سیستم سطوح انبساطی فیبوناچی اصلی (مشخصاً نواحی **۱۵۰٪ تا ۲۰۰٪**) را به عنوان نواحی پتانسیل بازگشتی در نظر می‌گیرد. این سطوح غالباً مناطقی هستند که در آن **نقدینگی (Liquidity)** جمع‌آوری شده و احتمال واکنش قیمت بالاست.
3.  **صدور سیگنال:** با رسیدن قیمت به این نواحی انبساطی و مشاهده اولین نشانه‌های اصلاح، سیستم یک موقعیت ورود را بر اساس منطق بازگشتی ارزیابی کرده و سیگنال را صادر می‌کند.

---

## ✨ ویژگی‌های کلیدی

* **فیبوناچی دینامیک:** ابزارها به صورت خودکار با داده‌های جدید قیمت آپدیت می‌شوند.
* **شناسایی خودکار ساختار بازار:** تحلیل هوشمند برای تشخیص الگوهای BOS و CHoCH.
* **دو مدل ورود مجزا:** ارائه استراتژی‌های متفاوت برای بازارهای دارای اصلاح سالم و بازارهای پرمومنتوم.
* **پارامترهای قابل تنظیم:** تمامی سطوح فیبوناچی، رنگ‌ها و تنظیمات منطقی قابل شخصی‌سازی هستند.
* **پنل اطلاعاتی:** نمایش وضعیت لحظه‌ای تحلیل بر روی چارت.
* **حالت تست بصری:** دارای پنل تعاملی برای تست دستی و اعتبارسنجی استراتژی توسط کاربر.

---

## 🚀 راهنمای استفاده و نکات کلیدی

برای استفاده بهینه از این کتابخانه در اکسپرت‌های معاملاتی خود، لطفاً به نکات زیر توجه فرمایید:

* **🎯 전제 전략:** این کتابخانه یک **موتور جستجوی نقطه ورود (Entry Engine)** است، نه یک استراتژی کامل. اکسپرت شما باید منطق کلی خود را برای تشخیص جهت روند (صعودی، نزولی یا رنج) داشته باشد. پس از تعیین جهت کلی توسط استراتژی شما، می‌توانید از این کتابخانه برای یافتن نقطه ورود دقیق و بهینه استفاده کنید.

* **📩 ارسال دستور:** اکسپرت شما با ارسال دستور `Buy` یا `Sell` (از طریق تابع `HFiboCreateNewStructure`) فرآیند تحلیل را برای یافتن یک موقعیت معاملاتی آغاز می‌کند.

* **⚠️ محدودیت تک ساختاری:** این کتابخانه طوری طراحی شده که در هر لحظه فقط و فقط روی **یک ساختار** تمرکز کند. تا زمانی که تکلیف یک تحلیل (صدور سیگنال، شکست کامل یا توقف دستی) مشخص نشده باشد، کتابخانه دستور جدیدی را پردازش نخواهد کرد. این ویژگی باعث افزایش کیفیت و جلوگیری از ایجاد سیگنال‌های متناقض می‌شود.

* **✖️ توقف و مدیریت دستور:** اگر به هر دلیلی (تغییر شرایط بازار، پشیمانی از تحلیل، ...) قصد لغو کردن تحلیل در حال اجرا را داشتید، اکسپرت شما باید مسئولیت مدیریت آن را بر عهده بگیرد. باید مکانیزمی در اکسپرت خود تعبیه کنید تا بتواند دستور **توقف (Stop)** را به کتابخانه ارسال کرده و تحلیل فعلی را به طور کامل متوقف و پاک‌سازی کند.

